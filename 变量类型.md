C语言的变量可以根据**两个属性**来分类

- 存储类型（生命周期）
- 作用域

描述一个变量可以用生命周期+作用域来描述

比如 **静态局部**变量



### 作用域

#### 局部变量

- 在函数内部定义的变量，形参也属于局部变量
- 局部变量只在定义它的函数内部有效，即局部变量只有在定义它的函数内部使用，其它函数不能使用它



#### 全局变量

- 在所有函数外部定义的变量
- 全局变量的作用范围是从定义变量的位置开始到源程序结束，即全局变量可以被在其定义位置之后的其它函数所共享



### 存储类型（生命周期）

>变量的存储类型就是指变量存储在什么地方。有3个地方可以用于存储变量：**普通内存、运行时堆栈、硬件寄存器**。变量的存储类型决定了变量何时创建、何时销毁以及它的值能保持多久，也就是决定了变量的生命周期



#### 自动变量

- 自动变量存储在堆栈中

- 被关键字 **auto** 修饰的 **局部变量**

- 局部变量默认是自动变量（所以通常不写auto，通常说到局部变量指的就是**自动局部变量**）
- 在程序执行到声明自动变量的代码块(函数)时，自动变量才被创建；当自动变量所在的代码块(函数)执行完毕后，这些自动变量就会自行销毁。如果一个函数被重复调用，这些自动变量每次都会重新创建



#### 静态变量

- 静态变量存储在静态内存

静态变量**只会创建一次**，程序中多次定义同一个静态变量的语句不会被调用，实际上仍然是第一次定义的那个

- **所有的全局变量都是静态变量**（所以全局变量可以不用static修饰）

- 被关键字 **static** 修饰的**局部变量**也是静态变量

- 静态变量在程序运行之前（编译链接时）创建，默认初始化为0，在程序的整个运行期间始终存在，直到程序结束。



特殊：**静态局部变量**

- static 可以让自动局部变量，变为静态局部变量，**生命周期做出了更改**，但是**作用域仍然是局部**，出了作用域将无法访问

- 静态局部变量是等**执行到对应的函数块才会创建**，不过销毁会等到程序结束（和所有静态变量保持一致）



经典例子

```C
 1 #include <stdio.h>
 2 
 3 int a;
 4 
 5 void test() {
 6     static int b = 0;
 7     b++;
 8     
 9     int c = 0;
10     c++;
11     
12     printf("b=%d, c=%d \n", b, c);
13 }
14 
15 int main() {
16     int i;
17     // 连续调用3次test函数
18     for (i = 0; i<3; i++) {
19         test();
20     }
21     
22     return 0;
23 }

/*
                              输出结果
                              b=1, c=1
                              b=2, c=1
                              b=3, c=1

*/
```



####  寄存器变量

- 存储在硬件寄存器中的变量，称为寄存器变量。寄存器变量比存储在内存中的变量访问效率更高

- 被关键字 **register** 修饰的自动变量都是寄存器变量

- 只有自动变量才可以是寄存器变量，全局变量和静态局部变量不行

- 寄存器变量只限于int、char和指针类型变量使用

- 因为寄存器变量本身就是自动变量，所以函数中的寄存器变量在调用该函数时占用寄存器中存放的值，当函数结束时释放寄存器，变量消失

- 由于计算机中寄存器数目有限，不能使用太多的寄存器变量。如果寄存器使用饱和时，程序将寄存器变量自动转换为自动变量处理

- 为了提高运算速度，一般会将一些频繁使用的自动变量定义为寄存器变量，这样程序尽可能地为它分配寄存器存放，而不用内存